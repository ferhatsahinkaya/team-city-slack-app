/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package teamcity.slack.app

import spark.Spark.*

fun main(args: Array<String>) {
    port(getPort())
    get("/ready") { _, _ -> 200 }
    post("/build") { _, _ -> 200 }
}

// TODO Simplify getPort method
fun getPort(): Int {
    val processBuilder = ProcessBuilder()
    return if (processBuilder.environment()["PORT"] != null) {
        Integer.parseInt(processBuilder.environment()["PORT"])
    } else 4567
}